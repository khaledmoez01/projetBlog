{
	"swagger": "2.0",
	"info": {
		"version": "1.0.0",
		"title": "projet blog Fivepoints",
		"description": "blog avec des articles et des commentaires."
	},
	"schemes": [
		"http"
	],
	"host": "localhost:3000",
	"basePath": "/",
	"securityDefinitions": {
		"Bearer_admin": {
			"type": "apiKey",
			"in": "header",
			"name": "Authorization",
			"description": "fournir un token valide dans le header pour l'accés à cette page à un utilisateur admin."
		},
		"Bearer_simple_user": {
			"type": "apiKey",
			"in": "header",
			"name": "Authorization",
			"description": "fournir un token valide dans le header pour l'accés à cette page à un utilisateur simple."
		}
	},
	"paths": {
		"/signup": {
			"post": {
				"summary": "Creer un nouvel utilisateur",
				"description": "Creer un nouvel utilisateur avec nom, prenom, mail, mot de passe requis. Le role est optionnel.",
				"parameters": [
					{
						"name": "user",
						"in": "body",
						"description": "le user à créer.",
						"schema": {
							"$ref": "#/definitions/User_creation"
						}
					}
				],
				"responses": {
					"200": {
						"description": "les détails de l'utilisateur à peine créé",
						"schema": {
							"$ref": "#/definitions/User_reponse"
						}
					},
					"422": {
						"$ref": "#/responses/Standard422ErrorResponse"
					},
					"500": {
						"$ref": "#/responses/Standard500ErrorResponse"
					}
				}
			}
		},
		"/login": {
			"post": {
				"summary": "Authentification d'un utilisateur déjà créé",
				"description": "Authentification d'un utilisateur déjà créé avec email et password",
				"parameters": [
					{
						"name": "authentification",
						"in": "body",
						"description": "les paramètres d'authentification.",
						"schema": {
							"$ref": "#/definitions/Login_creation"
						}
					}
				],
				"responses": {
					"200": {
						"description": "les détails de l'authentification",
						"schema": {
							"$ref": "#/definitions/Login_reponse"
						}
					},
					"401": {
						"$ref": "#/responses/Login401ErrorResponse"
					},
					"404": {
						"$ref": "#/responses/Standard404ErrorResponse"
					},
					"422": {
						"$ref": "#/responses/Standard422ErrorResponse"
					},
					"500": {
						"$ref": "#/responses/Standard500ErrorResponse"
					}
				}
			}
		},
		"/admin/": {
			"get": {
				"security": [
					{
						"Bearer_admin": []
					}
				],
				"summary": "Récupérer le nombre de documents par collection dans la base de données.",
				"description": "Récupérer le nombre de documents par collection dans la base de données. par un administrateur authentifié",
				"responses": {
					"200": {
						"description": "le nombre de documents par collection",
						"schema": {
							"type": "object",
							"properties": {
								"article_count": {
									"type": "integer"
								},
								"user_count": {
									"type": "integer"
								},
								"comment_count": {
									"type": "integer"
								}
							}
						}
					},
					"403": {
						"$ref": "#/responses/Todos403ErrorResponse"
					},
					"500": {
						"$ref": "#/responses/Standard500ErrorResponse"
					}
				}
			}
		},
		"/admin/article/create": {
			"post": {
				"security": [
					{
						"Bearer_admin": []
					}
				],
				"summary": "Création d'un article.",
				"description": "Création d'un article par un administrateur authentifié.",
				"consumes": [
					"multipart/form-data"
				],
				"parameters": [
					{
						"in": "formData",
						"name": "title",
						"type": "string",
						"required": true,
						"description": "le titre de l'article à créer."
					},
					{
						"in": "formData",
						"name": "content",
						"type": "string",
						"description": "le contenu de l'article à créer."
					},
					{
						"in": "formData",
						"name": "image",
						"type": "file",
						"description": "l'image de l'article à créer."
					},
					{
						"in": "formData",
						"name": "date",
						"type": "string",
						"format": "date-time",
						"description": "date de création de l'article."
					}
				],
				"responses": {
					"200": {
						"description": "les détails de l'article à peine créé.",
						"schema": {
							"required": [
								"article_image",
								"_id",
								"article_title",
								"article_content",
								"article_date",
								"article_user",
								"__v"
							],
							"properties": {
								"article_title": {
									"type": "string",
									"description": "le titre de l'article."
								},
								"article_content": {
									"type": "string",
									"description": "le contenu de l'article."
								},
								"article_date": {
									"type": "string",
									"format": "date-time",
									"description": "date de création de l'article."
								},
								"_id": {
									"type": "string",
									"description": "l'objectID de l'article."
								},
								"id": {
									"type": "string",
									"description": "l'objectID de l'article."
								},
								"article_virtual_content_introduction": {
									"type": "string",
									"description": "les 15 premières lettres du contenu de l'article créé."
								},
								"article_virtual_url": {
									"type": "string",
									"description": "l'url interne de l'article créé."
								},
								"article_user": {
									"type": "object",
									"properties": {
										"_id": {
											"type": "string"
										},
										"user_first_name": {
											"type": "string"
										},
										"user_family_name": {
											"type": "string"
										},
										"user_virtual_full_name": {
											"type": "string"
										},
										"user_virtual_url": {
											"type": "string"
										},
										"id": {
											"type": "string"
										}
									}
								}
							}
						}
					},
					"403": {
						"$ref": "#/responses/Todos403ErrorResponse"
					},
					"500": {
						"$ref": "#/responses/Standard500ErrorResponse"
					}
				}
			}
		},
		"/admin/articles": {
			"get": {
				"security": [
					{
						"Bearer_admin": []
					}
				],
				"summary": "Récupérer la liste de tous les articles.",
				"description": "Récupérer la liste de tous les articles par un administrateur authentifié",
				"responses": {
					"200": {
						"description": "les détails de tous les articles.",
						"schema": {
							"type": "array",
							"items": {
								"properties": {
									"_id": {
										"type": "string"
									},
									"article_title": {
										"type": "string"
									},
									"article_content": {
										"type": "string"
									},
									"article_date": {
										"type": "string",
										"format": "date-time"
									},
									"__v": {
										"type": "integer"
									},
									"article_virtual_content_introduction": {
										"type": "string"
									},
									"article_virtual_url": {
										"type": "string"
									},
									"id": {
										"type": "string"
									},
									"article_user": {
										"type": "object",
										"properties": {
											"_id": {
												"type": "string"
											},
											"user_first_name": {
												"type": "string"
											},
											"user_family_name": {
												"type": "string"
											},
											"user_virtual_full_name": {
												"type": "string"
											},
											"user_virtual_url": {
												"type": "string"
											},
											"id": {
												"type": "string"
											}
										}
									}
								}
							}
						}
					},
					"403": {
						"$ref": "#/responses/Todos403ErrorResponse"
					},
					"500": {
						"$ref": "#/responses/Standard500ErrorResponse"
					}
				}
			}
		},
		"/admin/article/{id_article}": {
			"get": {
				"security": [
					{
						"Bearer_admin": []
					}
				],
				"parameters": [
					{
						"in": "path",
						"name": "id_article",
						"required": true,
						"description": "The article's id",
						"type": "string"
					}
				],
				"summary": "les détails de l'article sélectionné.",
				"description": "les détails de l'article sélectionné.",
				"responses": {
					"200": {
						"description": "les détails de l'article sélectionné.",
						"schema": {
							"properties": {
								"article_comments": {
									"type": "array",
									"items": {
										"type": "object",
										"properties": {
											"_id": {
												"type": "string"
											},
											"comment_content": {
												"type": "string"
											},
											"comment_user": {
												"type": "string",
												"description": "l'objectID du commentateur."
											},
											"comment_date": {
												"type": "string",
												"format": "date-time"
											},
											"comment_article": {
												"type": "string",
												"description": "l'objectID de l'article rattaché au commentaire."
											},
											"__v": {
												"type": "integer"
											}
										}
									}
								},
								"article": {
									"type": "object",
									"properties": {
										"article_image": {
											"type": "string"
										},
										"_id": {
											"type": "string"
										},
										"article_title": {
											"type": "string"
										},
										"article_content": {
											"type": "string"
										},
										"article_date": {
											"type": "string",
											"format": "date-time"
										},
										"__v": {
											"type": "integer"
										},
										"article_virtual_content_introduction": {
											"type": "string"
										},
										"article_virtual_url": {
											"type": "string"
										},
										"id": {
											"type": "string"
										},
										"article_user": {
											"type": "object",
											"properties": {
												"_id": {
													"type": "string"
												},
												"user_first_name": {
													"type": "string"
												},
												"user_family_name": {
													"type": "string"
												},
												"user_virtual_full_name": {
													"type": "string"
												},
												"user_virtual_url": {
													"type": "string"
												},
												"id": {
													"type": "string"
												}
											}
										}
									}
								}
							}
						}
					},
					"403": {
						"$ref": "#/responses/Todos403ErrorResponse"
					},
					"500": {
						"$ref": "#/responses/Standard500ErrorResponse"
					}
				}
			}
		},
		"/admin/article/{id_article}/update": {
			"post": {
				"security": [
					{
						"Bearer_admin": []
					}
				],
				"summary": "Modification d'un article.",
				"description": "Modification d'un article par un administrateur authentifié.",
				"consumes": [
					"multipart/form-data"
				],
				"parameters": [
					{
						"in": "path",
						"name": "id_article",
						"required": true,
						"description": "The article's id",
						"type": "string"
					},
					{
						"in": "formData",
						"name": "title",
						"type": "string",
						"description": "le nouveau titre de l'article à modifier."
					},
					{
						"in": "formData",
						"name": "content",
						"type": "string",
						"description": "le nouveau contenu de l'article à modifier."
					},
					{
						"in": "formData",
						"name": "image",
						"type": "file",
						"description": "la nouvelle image de l'article à modifier."
					},
					{
						"in": "formData",
						"name": "date",
						"type": "string",
						"format": "date-time",
						"description": "la nouvelle date de création de l'article à modifier."
					}
				],
				"responses": {
					"200": {
						"description": "les détails de l'article à peine modifié.",
						"schema": {
							"required": [
								"article_image",
								"_id",
								"article_title",
								"article_content",
								"article_date",
								"article_user",
								"__v"
							],
							"properties": {
								"article_title": {
									"type": "string",
									"description": "le titre de l'article."
								},
								"article_content": {
									"type": "string",
									"description": "le contenu de l'article."
								},
								"article_image": {
									"type": "string",
									"description": "l'image associée à l'article."
								},
								"article_date": {
									"type": "string",
									"format": "date-time",
									"description": "date de création de l'article."
								},
								"article_user": {
									"type": "string",
									"description": "l'objectID de l'auteur."
								},
								"_id": {
									"type": "string",
									"description": "l'objectID de l'article."
								},
								"id": {
									"type": "string",
									"description": "l'objectID de l'article."
								},
								"article_virtual_content_introduction": {
									"type": "string",
									"description": "les 15 premières lettres du contenu de l'article créé."
								},
								"article_virtual_url": {
									"type": "string",
									"description": "l'url interne de l'article créé."
								},
								"__v": {
									"type": "integer"
								}
							}
						}
					},
					"204": {
						"description": "aucune donnée (title, content, image ou date ) n'a été envoyée dans body pour la mise à jour."
					},
					"403": {
						"$ref": "#/responses/Todos403ErrorResponse"
					},
					"404": {
						"$ref": "#/responses/Standard404ErrorResponse"
					},
					"500": {
						"$ref": "#/responses/Standard500ErrorResponse"
					}
				}
			}
		},
		"/admin/article/{id_article}/delete": {
			"post": {
				"security": [
					{
						"Bearer_admin": []
					}
				],
				"parameters": [
					{
						"in": "path",
						"name": "id_article",
						"required": true,
						"description": "The article's id to delete",
						"type": "string"
					}
				],
				"summary": "supprimer un article et ses commentaires.",
				"description": "supprimer un article et ses commentaires par un utilisateur authentifié.",
				"responses": {
					"200": {
						"description": "suppression réussie",
						"schema": {
							"properties": {
								"code": {
									"type": "string",
									"enum": [
										"200"
									]
								},
								"message": {
									"type": "string",
									"enum": [
										"Suppression d'article et des commentaires associés réussie."
									]
								}
							}
						}
					},
					"403": {
						"$ref": "#/responses/Todos403ErrorResponse"
					},
					"404": {
						"$ref": "#/responses/Standard404ErrorResponse"
					},
					"500": {
						"$ref": "#/responses/Standard500ErrorResponse"
					}
				}
			}
		},
		"/admin/users": {
			"get": {
				"security": [
					{
						"Bearer_admin": []
					}
				],
				"summary": "Récupérer la liste de tous les utilisateurs.",
				"description": "Récupérer la liste de tous les utilisateurs par un administrateur authentifié",
				"responses": {
					"200": {
						"description": "les détails de tous les utilisateurs.",
						"schema": {
							"type": "array",
							"items": {
								"type": "object",
								"properties": {
									"_id": {
										"type": "string"
									},
									"user_role": {
										"type": "string"
									},
									"user_first_name": {
										"type": "string"
									},
									"user_family_name": {
										"type": "string"
									},
									"user_email": {
										"type": "string"
									},
									"user_virtual_full_name": {
										"type": "string"
									},
									"user_virtual_url": {
										"type": "string"
									},
									"id": {
										"type": "string"
									}
								}
							}
						}
					},
					"403": {
						"$ref": "#/responses/Todos403ErrorResponse"
					},
					"500": {
						"$ref": "#/responses/Standard500ErrorResponse"
					}
				}
			}
		},
		"/admin/user/create": {
			"post": {
				"security": [
					{
						"Bearer_admin": []
					}
				],
				"summary": "Création d'un utilisateur par un administrateur",
				"description": "Création d'un utilisateur par un administrateur",
				"parameters": [
					{
						"name": "user",
						"in": "body",
						"description": "le user à créer.",
						"schema": {
							"$ref": "#/definitions/User_creation"
						}
					}
				],
				"responses": {
					"200": {
						"description": "les détails de l'utilisateur à peine créé",
						"schema": {
						    "type": "object",
						    "properties": {
						    	"_id": {
						    		"type": "string"
						    	},
						    	"user_role": {
						    		"type": "string"
						    	},
						    	"user_first_name": {
						    		"type": "string"
						    	},
						    	"user_family_name": {
						    		"type": "string"
						    	},
						    	"user_email": {
						    		"type": "string"
						    	},
						    	"user_virtual_full_name": {
						    		"type": "string"
						    	},
						    	"user_virtual_url": {
						    		"type": "string"
						    	},
						    	"id": {
						    		"type": "string"
						    	}
						    }
						}
					},
					"422": {
						"$ref": "#/responses/Standard422ErrorResponse"
					},
					"403": {
						"$ref": "#/responses/Todos403ErrorResponse"
					},
					"500": {
						"$ref": "#/responses/Standard500ErrorResponse"
					}
				}
			}
		},
		"/admin/user/{id_user}": {
			"get": {
				"security": [
					{
						"Bearer_admin": []
					}
				],
				"parameters": [
					{
						"in": "path",
						"name": "id_user",
						"required": true,
						"description": "The user's id",
						"type": "string"
					}
				],
				"summary": "les détails de l'utilisateur sélectionné.",
				"description": "les détails de l'utilisateur sélectionné.",
				"responses": {
					"200": {
						"description": "les détails de l'utilisateur sélectionné.",
						"schema": {
							"properties": {
								"user": {
									"type": "object",
									"properties": {
										"_id": {
											"type": "string",
											"description": "l'objectID de l'utilisateur."
										},
										"user_role": {
											"type": "string",
											"enum": [
												"admin",
												"simpleuser"
											]
										},
										"user_first_name": {
											"type": "string"
										},
										"user_family_name": {
											"type": "string"
										},
										"user_email": {
											"type": "string"
										},
										"user_virtual_full_name": {
											"type": "string"
										},
										"user_virtual_url": {
											"type": "string"
										},
										"id": {
											"type": "string"
										}
									}
								},
								"user_articles": {
									"type": "array",
									"items": {
										"type": "object",
										"properties": {
											"_id": {
												"type": "string",
												"description": "l'objectID de l'article."
											},
											"id": {
												"type": "string",
												"description": "l'objectID de l'article."
											},
											"article_title": {
												"type": "string"
											},
											"article_content": {
												"type": "string"
											},
											"article_virtual_content_introduction": {
												"type": "string"
											},
											"article_virtual_url": {
												"type": "string"
											}
										}
									}
								},
								"user_comments": {
									"type": "array",
									"items": {
										"type": "object",
										"properties": {
											"_id": {
												"type": "string",
												"description": "l'objectID du commentaire."
											},
											"id": {
												"type": "string",
												"description": "l'objectID du commentaire"
											},
											"comment_content": {
												"type": "string"
											},
											"comment_virtual_url": {
												"type": "string"
											}
										}
									}
								}
							}
						}
					}
				}
			}
		},
		"/admin/user/{id_user}/update": {
			"post": {
				"security": [
					{
						"Bearer_admin": []
					}
				],
				"summary": "Modification d'un user.",
				"description": "Modification d'un user par un administrateur authentifié.",
				"parameters": [
					{
						"in": "path",
						"name": "id_user",
						"required": true,
						"description": "The user's id",
						"type": "string"
					},
					{
						"name": "user",
						"in": "body",
						"description": "les données du user à modifier.",
						"schema": {
							"properties": {
								"first_name": {
									"type": "string",
									"description": "le nouveau prenom du user à modifier."
								},
								"family_name": {
									"type": "string",
									"description": "le nouveau nom de famille du user à modifier."
								},
								"role": {
									"type": "string",
									"description": "le nouveau role du user à modifier.",
									"enum": [
										"admin",
										"simpleuser"
									]
								}
							}
						}
					}
				],
				"responses": {
					"200": {
						"description": "les détails de l'user à peine modifié.",
						"schema": {
							"required": [
								"user_role",
								"_id",
								"user_first_name",
								"user_password",
								"user_virtual_full_name",
								"user_virtual_url",
								"__v"
							],
							"properties": {
								"_id": {
									"type": "string",
									"description": "l'objectID de l'user."
								},
								"id": {
									"type": "string",
									"description": "l'objectID de l'user."
								},
								"user_role": {
									"type": "string",
									"description": "le role du user."
								},
								"user_first_name": {
									"type": "string",
									"description": "le prenom du user."
								},
								"user_family_name": {
									"type": "string",
									"description": "le nom de famille du user."
								},
								"user_email": {
									"type": "string",
									"description": "le mail du user."
								},
								"user_virtual_full_name": {
									"type": "string",
									"description": "le nom complet du user."
								},
								"user_virtual_url": {
									"type": "string",
									"description": "l'url du user."
								}
							}
						}
					},
					"204": {
						"description": "aucune donnée (nom, prenom ou role) n'a été envoyée dans body pour la mise à jour."
					},
					"403": {
						"$ref": "#/responses/Todos403ErrorResponse"
					},
					"404": {
						"$ref": "#/responses/Standard404ErrorResponse"
					},
					"500": {
						"$ref": "#/responses/Standard500ErrorResponse"
					}
				}
			}
		},
		"/admin/user/{id_user}/delete": {
			"post": {
				"security": [
					{
						"Bearer_admin": []
					}
				],
				"parameters": [
					{
						"in": "path",
						"name": "id_user",
						"required": true,
						"description": "The user's id to delete",
						"type": "string"
					}
				],
				"summary": "supprimer un user, ses commentaires, ses articles et les commentaires de ces derniers.",
				"description": "supprimer un user, ses commentaires, ses articles et les commentaires de ces derniers par un utilisateur authentifié.",
				"responses": {
					"200": {
						"description": "suppression réussie",
						"schema": {
							"properties": {
								"code": {
									"type": "string",
									"enum": [
										"200"
									]
								},
								"message": {
									"type": "string",
									"enum": [
										"Suppression du user, des articles et leurs commentaires associés écrits par ce user et des commentaires écrits par ce user réussie."
									]
								}
							}
						}
					},
					"403": {
						"$ref": "#/responses/Todos403ErrorResponse"
					},
					"404": {
						"$ref": "#/responses/Standard404ErrorResponse"
					},
					"500": {
						"$ref": "#/responses/Standard500ErrorResponse"
					}
				}
			}
		},
		"/admin/comment/create": {
			"post": {
				"security": [
					{
						"Bearer_admin": []
					}
				],
				"summary": "Création d'un commentaire lié à un article.",
				"parameters": [
					{
						"name": "comment",
						"in": "body",
						"description": "les champs du commentaire à créer.",
						"schema": {
							"required": [
								"content",
								"article"
							],
							"properties": {
								"content": {
									"type": "string",
									"description": "contenu du commentaire à créer."
								},
								"article": {
									"type": "string",
									"description": "id de l'article lié au commentaire à créer."
								},
								"date": {
									"type": "string",
									"format": "date-time",
									"description": "date de création du commentaire."
								}
							}
						}
					}
				],
				"responses": {
					"200": {
						"description": "les détails du commentaire à peine créé.",
						"schema": {
							"required": [
								"comment_content",
								"_id",
								"comment_user",
								"comment_date",
								"comment_article",
								"__v"
							],
							"properties": {
								"comment_article": {
									"type": "string",
									"description": "l'id de l'article lié au commentaire."
								},
								"comment_content": {
									"type": "string",
									"description": "le contenu du contenu."
								},
								"comment_date": {
									"type": "string",
									"format": "date-time",
									"description": "date de création du commentaire."
								},
								"comment_user": {
									"type": "string",
									"description": "l'objectID de l'auteur du commentaire."
								},
								"_id": {
									"type": "string",
									"description": "l'objectID du commentaire."
								},
								"__v": {
									"type": "integer"
								}
							}
						}
					},
					"403": {
						"$ref": "#/responses/Todos403ErrorResponse"
					},
					"404": {
						"$ref": "#/responses/Standard404ErrorResponse"
					},
					"500": {
						"$ref": "#/responses/Standard500ErrorResponse"
					}
				}
			}
		},
		"/admin/comments": {
			"get": {
				"security": [
					{
						"Bearer_admin": []
					}
				],
				"summary": "Récupérer la liste de tous les commentaires.",
				"description": "Récupérer la liste de tous les commentaires (ainsi que l'article et l'utilisateur lié) par un administrateur authentifié",
				"responses": {
					"200": {
						"description": "les détails de tous les commentaires.",
						"schema": {
							"type": "array",
							"items": {
								"type": "object",
								"properties": {
									"_id": {
										"type": "string",
										"description": "l'bject id du commentaire."
									},
									"id": {
										"type": "string",
										"description": "l'bject id du commentaire."
									},
									"comment_content": {
										"type": "string",
										"description": "le contenu du commentaire."
									},
									"comment_date": {
										"type": "string"
									},
									"comment_virtual_url": {
										"type": "string"
									},
									"comment_user": {
										"type": "object",
										"properties": {
											"_id": {
												"type": "string",
												"description": "l'bject id de l'user commentateur."
											},
											"id": {
												"type": "string",
												"description": "l'bject id de l'user commentateur."
											},
											"user_first_name": {
												"type": "string"
											},
											"user_family_name": {
												"type": "string"
											},
											"user_virtual_full_name": {
												"type": "string"
											},
											"user_virtual_url": {
												"type": "string"
											}
										}
									},
									"comment_article": {
										"type": "object",
										"properties": {
											"_id": {
												"type": "string",
												"description": "l'bject id de l'article rattaché au commentaire."
											},
											"id": {
												"type": "string",
												"description": "l'bject id de l'article rattaché au commentaire."
											},
											"article_title": {
												"type": "string"
											},
											"article_content": {
												"type": "string"
											},
											"article_virtual_content_introduction": {
												"type": "string"
											},
											"article_virtual_url": {
												"type": "string"
											}
										}
									}
								}
							}
						}
					},
					"403": {
						"$ref": "#/responses/Todos403ErrorResponse"
					},
					"500": {
						"$ref": "#/responses/Standard500ErrorResponse"
					}
				}
			}
		},
		"/admin/comment/{id_comment}": {
			"get": {
				"security": [
					{
						"Bearer_admin": []
					}
				],
				"parameters": [
					{
						"in": "path",
						"name": "id_comment",
						"required": true,
						"description": "The comment's id",
						"type": "string"
					}
				],
				"summary": "les détails du commentaire sélectionné.",
				"description": "les détails du commentaire sélectionné.",
				"responses": {
					"200": {
						"description": "les détails du commentaire sélectionné.",
						"schema": {
							"properties": {
								"comment": {
									"type": "object",
									"properties": {
										"_id": {
											"type": "string",
											"description": "l'objectID du commentaire."
										},
										"comment_content": {
											"type": "string"
										},
										"comment_date": {
											"type": "string",
											"format": "date-time"
										},
										"comment_virtual_url": {
											"type": "string"
										},
										"__v": {
											"type": "integer"
										},
										"id": {
											"type": "string"
										},
										"comment_user": {
											"type": "object",
											"properties": {
												"_id": {
													"type": "string",
													"description": "l'objectID de l'utilisateur."
												},
												"id": {
													"type": "string"
												},
												"user_first_name": {
													"type": "string"
												},
												"user_family_name": {
													"type": "string"
												},
												"user_virtual_full_name": {
													"type": "string"
												},
												"user_virtual_url": {
													"type": "string"
												}
											}
										},
										"comment_article": {
											"type": "object",
											"properties": {
												"_id": {
													"type": "string",
													"description": "l'objectID de l'article."
												},
												"id": {
													"type": "string"
												},
												"article_title": {
													"type": "string"
												},
												"article_content": {
													"type": "string"
												},
												"article_virtual_content_introduction": {
													"type": "string"
												},
												"article_virtual_url": {
													"type": "string"
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		},
		"/admin/comment/{id_comment}/update": {
			"post": {
				"security": [
					{
						"Bearer_admin": []
					}
				],
				"summary": "Modification d'un commentaire.",
				"description": "Modification d'un commentaire par un administrateur authentifié.",
				"parameters": [
					{
						"in": "path",
						"name": "id_comment",
						"required": true,
						"description": "The comment's id",
						"type": "string"
					},
					{
						"name": "comment",
						"in": "body",
						"description": "les données du commentaire à modifier.",
						"schema": {
							"properties": {
								"content": {
									"type": "string",
									"description": "le nouveau contenu du commentaire à modifier."
								},
								"date": {
									"type": "string",
									"format": "date-time",
									"description": "la nouvelle date du commentaire à modifier."
								}
							}
						}
					}
				],
				"responses": {
					"200": {
						"description": "les détails du commentaire à peine modifié.",
						"schema": {
							"required": [
								"comment_content",
								"_id",
								"comment_user",
								"comment_date",
								"comment_article",
								"comment_virtual_url",
								"__v"
							],
							"properties": {
								"_id": {
									"type": "string",
									"description": "l'objectID du commentaire."
								},
								"id": {
									"type": "string",
									"description": "l'objectID du commentaire."
								},
								"__v": {
									"type": "integer"
								},
								"comment_content": {
									"type": "string",
									"description": "le contenu du commentaire."
								},
								"comment_user": {
									"type": "string",
									"description": "le user lié au commentaire."
								},
								"comment_date": {
									"type": "string",
									"description": "la date du commentaire."
								},
								"comment_article": {
									"type": "string",
									"description": "l'article lié au commentaire."
								},
								"comment_virtual_url": {
									"type": "string",
									"description": "l'url du commentaire."
								}
							}
						}
					},
					"204": {
						"description": "aucune donnée (date, content) n'a été envoyée dans body pour la mise à jour."
					},
					"403": {
						"$ref": "#/responses/Todos403ErrorResponse"
					},
					"404": {
						"$ref": "#/responses/Standard404ErrorResponse"
					},
					"500": {
						"$ref": "#/responses/Standard500ErrorResponse"
					}
				}
			}
		},
		"/admin/comment/{id_comment}/delete": {
			"post": {
				"security": [
					{
						"Bearer_admin": []
					}
				],
				"parameters": [
					{
						"in": "path",
						"name": "id_comment",
						"required": true,
						"description": "The comment's id to delete",
						"type": "string"
					}
				],
				"summary": "supprimer un commentaire.",
				"description": "supprimer un commentaire par un utilisateur authentifié.",
				"responses": {
					"200": {
						"description": "suppression réussie",
						"schema": {
							"properties": {
								"code": {
									"type": "string",
									"enum": [
										"200"
									]
								},
								"message": {
									"type": "string",
									"enum": [
										"Suppression de commentaire réussie."
									]
								}
							}
						}
					},
					"403": {
						"$ref": "#/responses/Todos403ErrorResponse"
					},
					"404": {
						"$ref": "#/responses/Standard404ErrorResponse"
					},
					"500": {
						"$ref": "#/responses/Standard500ErrorResponse"
					}
				}
			}
		},
		"/uploads/{image_name}": {
			"get": {
				"security": [
					{
						"Bearer_admin": []
					},
					{
						"Bearer_simple_user": []
					}
				],
				"parameters": [
					{
						"in": "path",
						"name": "image_name",
						"required": true,
						"description": "The image's name",
						"type": "string"
					}
				],
				"summary": "Récupération d'une image d'un article.",
				"description": "Récupération d'une image d'un article depuis le dossier upload",
				"produces": [
					"image/png",
					"image/jpeg"
				],
				"responses": {
					"200": {
						"description": "OK",
						"schema": {
							"type": "file"
						}
					},
					"403": {
						"$ref": "#/responses/Todos403ErrorResponse"
					},
					"404": {
						"$ref": "#/responses/Standard404ErrorResponse"
					}
				}
			}
		},
		"/simpleuser/articles": {
			"get": {
				"security": [
					{
						"Bearer_simple_user": []
					}
				],
				"summary": "Récupérer la liste de tous les articles.",
				"description": "Récupérer la liste de tous les articles par un utilisateur simple authentifié",
				"responses": {
					"200": {
						"description": "les détails de tous les articles.",
						"schema": {
							"type": "array",
							"items": {
								"properties": {
									"_id": {
										"type": "string"
									},
									"article_title": {
										"type": "string"
									},
									"article_content": {
										"type": "string"
									},
									"article_date": {
										"type": "string",
										"format": "date-time"
									},
									"__v": {
										"type": "integer"
									},
									"article_virtual_content_introduction": {
										"type": "string"
									},
									"article_virtual_url": {
										"type": "string"
									},
									"id": {
										"type": "string"
									},
									"article_user": {
										"type": "object",
										"properties": {
											"_id": {
												"type": "string"
											},
											"user_first_name": {
												"type": "string"
											},
											"user_family_name": {
												"type": "string"
											},
											"user_virtual_full_name": {
												"type": "string"
											},
											"user_virtual_url": {
												"type": "string"
											},
											"id": {
												"type": "string"
											}
										}
									}
								}
							}
						}
					},
					"403": {
						"$ref": "#/responses/Todos403ErrorResponse"
					},
					"500": {
						"$ref": "#/responses/Standard500ErrorResponse"
					}
				}
			}
		},
		"/simpleuser/article/{id_article}": {
			"get": {
				"security": [
					{
						"Bearer_simple_user": []
					}
				],
				"parameters": [
					{
						"in": "path",
						"name": "id_article",
						"required": true,
						"description": "The article's id",
						"type": "string"
					}
				],
				"summary": "les détails de l'article sélectionné.",
				"description": "les détails de l'article sélectionné.",
				"responses": {
					"200": {
						"description": "les détails de l'article sélectionné.",
						"schema": {
							"properties": {
								"article_comments": {
									"type": "array",
									"items": {
										"type": "object",
										"properties": {
											"_id": {
												"type": "string"
											},
											"comment_content": {
												"type": "string"
											},
											"comment_user": {
												"type": "string",
												"description": "l'objectID du commentateur."
											},
											"comment_date": {
												"type": "string",
												"format": "date-time"
											},
											"comment_article": {
												"type": "string",
												"description": "l'objectID de l'article rattaché au commentaire."
											},
											"__v": {
												"type": "integer"
											}
										}
									}
								},
								"article": {
									"type": "object",
									"properties": {
										"article_image": {
											"type": "string"
										},
										"_id": {
											"type": "string"
										},
										"article_title": {
											"type": "string"
										},
										"article_content": {
											"type": "string"
										},
										"article_date": {
											"type": "string",
											"format": "date-time"
										},
										"__v": {
											"type": "integer"
										},
										"article_virtual_content_introduction": {
											"type": "string"
										},
										"article_virtual_url": {
											"type": "string"
										},
										"id": {
											"type": "string"
										},
										"article_user": {
											"type": "object",
											"properties": {
												"_id": {
													"type": "string"
												},
												"user_first_name": {
													"type": "string"
												},
												"user_family_name": {
													"type": "string"
												},
												"user_virtual_full_name": {
													"type": "string"
												},
												"user_virtual_url": {
													"type": "string"
												},
												"id": {
													"type": "string"
												}
											}
										}
									}
								}
							}
						}
					},
					"403": {
						"$ref": "#/responses/Todos403ErrorResponse"
					},
					"500": {
						"$ref": "#/responses/Standard500ErrorResponse"
					}
				}
			}
		},
		"/simpleuser/user": {
			"get": {
				"security": [
					{
						"Bearer_simple_user": []
					}
				],
				"summary": "les détails du simple utilisateur actuellement authentifié.",
				"description": "les détails du simple utilisateur actuellement authentifié.",
				"responses": {
					"200": {
						"description": "les détails du simple utilisateur actuellement authentifié.",
						"schema": {
							"properties": {
								"user": {
									"type": "object",
									"properties": {
										"_id": {
											"type": "string",
											"description": "l'objectID de l'utilisateur."
										},
										"user_role": {
											"type": "string",
											"enum": [
												"admin",
												"simpleuser"
											]
										},
										"user_first_name": {
											"type": "string"
										},
										"user_family_name": {
											"type": "string"
										},
										"user_email": {
											"type": "string"
										},
										"__v": {
											"type": "integer"
										},
										"user_virtual_full_name": {
											"type": "string"
										},
										"user_virtual_url": {
											"type": "string"
										},
										"id": {
											"type": "string"
										}
									}
								},
								"user_articles": {
									"type": "array",
									"items": {
										"type": "object",
										"properties": {
											"_id": {
												"type": "string",
												"description": "l'objectID de l'article."
											},
											"id": {
												"type": "string",
												"description": "l'objectID de l'article."
											},
											"article_title": {
												"type": "string"
											},
											"article_content": {
												"type": "string"
											},
											"article_virtual_content_introduction": {
												"type": "string"
											},
											"article_virtual_url": {
												"type": "string"
											}
										}
									}
								},
								"user_comments": {
									"type": "array",
									"items": {
										"type": "object",
										"properties": {
											"_id": {
												"type": "string",
												"description": "l'objectID du commentaire."
											},
											"id": {
												"type": "string",
												"description": "l'objectID du commentaire"
											},
											"comment_content": {
												"type": "string"
											},
											"comment_virtual_url": {
												"type": "string"
											}
										}
									}
								}
							}
						}
					}
				}
			}
		},
		"/simpleuser/comment/create": {
			"post": {
				"security": [
					{
						"Bearer_simple_user": []
					}
				],
				"summary": "Création d'un commentaire lié à un article.",
				"parameters": [
					{
						"name": "comment",
						"in": "body",
						"description": "les champs du commentaire à créer.",
						"schema": {
							"required": [
								"content",
								"article"
							],
							"properties": {
								"content": {
									"type": "string",
									"description": "contenu du commentaire à créer."
								},
								"article": {
									"type": "string",
									"description": "id de l'article lié au commentaire à créer."
								},
								"date": {
									"type": "string",
									"format": "date-time",
									"description": "date de création du commentaire."
								}
							}
						}
					}
				],
				"responses": {
					"200": {
						"description": "les détails du commentaire à peine créé.",
						"schema": {
							"required": [
								"comment_content",
								"_id",
								"comment_user",
								"comment_date",
								"comment_article",
								"__v"
							],
							"properties": {
								"comment_article": {
									"type": "string",
									"description": "l'id de l'article lié au commentaire."
								},
								"comment_content": {
									"type": "string",
									"description": "le contenu du contenu."
								},
								"comment_date": {
									"type": "string",
									"format": "date-time",
									"description": "date de création du commentaire."
								},
								"comment_user": {
									"type": "string",
									"description": "l'objectID de l'auteur du commentaire."
								},
								"_id": {
									"type": "string",
									"description": "l'objectID du commentaire."
								},
								"__v": {
									"type": "integer"
								}
							}
						}
					},
					"403": {
						"$ref": "#/responses/Todos403ErrorResponse"
					},
					"404": {
						"$ref": "#/responses/Standard404ErrorResponse"
					},
					"500": {
						"$ref": "#/responses/Standard500ErrorResponse"
					}
				}
			}
		}
	},
	"definitions": {
		"User_creation": {
			"required": [
				"first_name",
				"family_name",
				"email",
				"password"
			],
			"properties": {
				"first_name": {
					"type": "string"
				},
				"family_name": {
					"type": "string"
				},
				"email": {
					"type": "string",
					"pattern": "\\S+@\\S+\\.\\S+",
					"description": "doit avoir un format mail valide par exemple xxx@yyy.zz",
					"uniqueItems": true
				},
				"password": {
					"type": "string"
				},
				"role": {
					"type": "string"
				}
			}
		},
		"User_reponse": {
			"properties": {
				"code": {
					"type": "string",
					"enum": [
						"200"
					]
				},
				"message": {
					"type": "string",
					"enum": [
						"Création d'utilisateur réussie."
					]
				}
			}
		},
		"Login_creation": {
			"required": [
				"email",
				"password"
			],
			"properties": {
				"email": {
					"type": "string",
					"pattern": "\\S+@\\S+\\.\\S+",
					"description": "doit avoir un format mail valide par exemple xxx@yyy.zz"
				},
				"password": {
					"type": "string"
				}
			}
		},
		"Login_reponse": {
			"properties": {
				"auth": {
					"type": "boolean"
				},
				"token": {
					"type": "string"
				},
				"message": {
					"type": "string"
				}
			}
		},
		"Error": {
			"required": [
				"code",
				"message"
			],
			"properties": {
				"code": {
					"type": "string"
				},
				"message": {
					"type": "string"
				}
			}
		}
	},
	"responses": {
		"Standard500ErrorResponse": {
			"description": "Erreur lors de la manipulation de la base de données.",
			"schema": {
				"$ref": "#/definitions/Error"
			}
		},
		"Standard422ErrorResponse": {
			"description": "Erreur dans les données à insérer: donnée déja présente en base de données",
			"schema": {
				"$ref": "#/definitions/Error"
			}
		},
		"Standard404ErrorResponse": {
			"description": "L'element recherché est introuvable dans la base de données.",
			"schema": {
				"$ref": "#/definitions/Error"
			}
		},
		"Login401ErrorResponse": {
			"description": "le mail et le mot de passe insérés ne correspondent pas.",
			"schema": {
				"required": [
					"code",
					"auth",
					"token",
					"message"
				],
				"properties": {
					"code": {
						"type": "string",
						"enum": [
							"401"
						]
					},
					"auth": {
						"type": "boolean",
						"enum": [
							false
						]
					},
					"token": {
						"type": "string",
						"enum": [
							null
						]
					},
					"message": {
						"type": "string",
						"enum": [
							"password does not match"
						]
					}
				}
			}
		},
		"Todos403ErrorResponse": {
			"description": "Echec d'authentification (token non fourni ou mot de passe érroné)",
			"schema": {
				"properties": {
					"code": {
						"type": "string",
						"enum": [
							"403"
						]
					},
					"auth": {
						"type": "boolean",
						"enum": [
							false
						]
					},
					"token": {
						"type": "string",
						"enum": [
							null
						]
					},
					"message": {
						"type": "string",
						"enum": [
							"Failed to authenticate token.",
							"No token provided."
						]
					}
				}
			}
		}
	}
}